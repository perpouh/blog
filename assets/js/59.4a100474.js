(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{629:function(e,n,t){"use strict";t.r(n);var o=t(55),a=Object(o.a)({},(function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"サブドメインでコントローラを振り分ける"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#サブドメインでコントローラを振り分ける"}},[e._v("#")]),e._v(" サブドメインでコントローラを振り分ける")]),e._v(" "),t("p",[e._v("https://hogehoge.com/:role/:controller/:action\nみたいなURLが嫌になったので\nhttps://role.hogehoge.com/:controller/:action\nを目指す。")]),e._v(" "),t("p",[e._v("基本的な参考記事: "),t("a",{attrs:{href:"https://qiita.com/TAKESHI_ONAGA/items/c5fbba776982835f5216",target:"_blank",rel:"noopener noreferrer"}},[e._v("Railsでサブドメインに対応させる方法"),t("OutboundLink")],1),t("br"),e._v("\nでもこのルーティングはまだちょっと不満だったので（コントローラの階層化もしたいしそれぞれのindexも作りたい）以下ちょっとそのあたりを拡充した話になります。")]),e._v(" "),t("p",[e._v("config/environments/development.rb"),t("br"),e._v("\n※めんどくさかったのでやっていませんが環境変数使うなりなんなりもうちょっといいやり方があると思います")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('# (略)\n  config.hosts << "example.com"\n  config.hosts << "worker.example.com"\n  config.hosts << "admin.example.com"\n# (略)\n')])])]),t("p",[e._v("routes.rb")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("  constraints subdomain: '' do\n    get '/', to: \"pages#index\"\n  end\n  constraints subdomain: 'worker' do\n    scope module: :worker do # moduleにすることでドメイン後にworkerとか入らずに済む\n      get '/', to: \"pages#index\"\n    end\n  end\n  constraints subdomain: 'admin' do\n    scope module: :admin do\n      get '/', to: \"pages#index\"\n    end\n  end\n")])])]),t("p",[e._v("app/controllers/admin/pages_controller.rb")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("class Admin::PagesController < ApplicationController\n  layout 'admin' # おまけでレイアウトファイル振り分け\n  def index\n  end\nend \n")])])]),t("p",[e._v("これで http://admin.example.com/:controller/:action ができました！やったね！")])])}),[],!1,null,null,null);n.default=a.exports}}]);